{% extends 'base.html.twig' %}

{% block title %}Liste stagiaires{% endblock %}

{% block body %}

    

    <div class="container usersList">
        <div class="top">
            <h1>Liste stagiaires</h1>
            <a href="{{ path('new_student') }}" ><i class="fa-solid fa-user-plus"></i></a>
        </div>


        <div class="list-person list-student">

            <div class="top-list">
                <p>Nom</p>
                <p>Formation</p>
                <p>Date de début</p>
                <p>Date de fin</p>
                <p>Statut</p>

            </div>

            <div class="content-list">
                {% for student in students %}
                    <div>
                        
                        {# <p>{{student.sessions.formation.name}}</p> #}
                        
                        {% for session in student.sessions %}
                            <p><a href="{{ path('show_student', {'id': student.id }) }}">{{student}}</a></p>
                            <p><a href="{{ path('show_session', {'id': session.id }) }}">{{session.formation.name}}</a></p>

                          

                            <p>{{session.startDate|date("d.m.Y")}}</p>
                            <p>{{session.endDate|date("d.m.Y")}}</p>
                            
                            
                                {% set currentDate = date('now') %}
                                {% if session.startDate <= currentDate and currentDate <= session.endDate %}
                                   <p>a débuté</p>
                                   
                                {% elseif session.startDate > currentDate %}                           
                                    <p>n'a pas débuté</p>
                             
                                {% elseif session.endDate < currentDate %}
                                    <p>error</p>
                                {% endif %}
                            


                            
                        {% endfor %}
        
                    
                     
                        
                        {# <a  href="{{ path('edit_student', {'id': student.id }) }}">Edit</a>
                        <a  href="{{ path('delete_student', {'id': student.id }) }}">Supprimer</a>  #}
                    </div>
                {% endfor %}
            </div>

        </div>

    </div>


    

    


{% endblock %}
